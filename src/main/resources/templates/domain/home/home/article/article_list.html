<html layout:decorate="~{domain/home/home/layout}">
<div layout:fragment="content">
  <div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
    <div>
    <table class="table">
        <thead>
      <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>유료글</th>
        <th>작성일시</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="article, loop : ${paging}">
        <td th:text="${loop.count}"></td>
        <td>
          <a th:href="@{|/post/${article.id}|}" th:text="${article.title}"></a>
        </td>
        <td>
          <a th:href="@{|/post/b/${article.author.username}|}" th:if="${article.author != null}" th:text="${article.author.username}"></a>
        </td>
        <td>
          <th:block th:if="${article.isPaid}">
            <input type="checkbox" class="checkbox" disabled checked />
          </th:block>
          <th:block th:unless="${article.isPaid}">
            <input type="checkbox" class="checkbox" disabled />
          </th:block>
        </td>
        <td th:text="${#temporals.format(article.createDate, 'yyyy-MM-dd HH:mm')}"></td>
      </tr>
      </tbody>
      </table>
      <!-- 페이징 처리 시작 -->
      <div th:if="${!paging.isEmpty()}" class="flex justify-center my-3">
        <!-- 이전 페이지 -->
        <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
          <a th:href="@{|?page=${paging.number-1}|}"
             th:classappend="${!paging.hasPrevious} ? 'btn-disabled'"
             class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
            <span class="sr-only">Previous</span>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
            </svg>
          </a>
          <!-- 페이지 리스트 loop -->
          <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
              th:if="${page >= paging.number-5 and page <= paging.number+5}"
              aria-current="page"
              th:class="${page == paging.number} ? 'relative z-10 inline-flex items-center bg-indigo-600 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600' : 'relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0'"
              th:classappend="${page == paging.number} ? 'btn-active'"
          >
            <a th:text="${page+1}" th:href="@{|?page=${page}|}"></a>
          </li>
          <!-- 다음 페이지 -->
          <a th:href="@{|?page=${paging.number+1}|}"
             th:classappend="${!paging.hasNext} ? 'btn-disabled'"
             class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
            <span class="sr-only">Next</span>
            <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
            </svg>
          </a>
        </nav>
      </div>
      <!-- 페이징 처리 끝 -->
      <a th:href="@{/post/write}" class="flex btn btn-ghost">글 등록</a>
    </div>
  </div>
</div>

</html>